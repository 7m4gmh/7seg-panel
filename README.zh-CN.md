# 7æ®µæ•°ç ç®¡LEDé¢æ¿è§†é¢‘æ’­æ”¾å™¨

[![Language](https://img.shields.io/badge/Language-C%2B%2B-blue.svg)](https://isocpp.org/)
[![Library](https://img.shields.io/badge/Library-OpenCV%20%7C%20GStreamer-green.svg)](https://opencv.org/)
[![Platform](https://img.shields.io/badge/Platform-Linux-lightgrey.svg)](https://www.linux.org/)

æœ¬é¡¹ç›®æä¾›äº†ä¸€å¥—å·¥å…·ï¼Œç”¨äºåœ¨ç”±I2Cè¿æ¥çš„ã€åŸºäºHT16K33çš„7æ®µæ•°ç ç®¡LEDæ¨¡å—ç»„æˆçš„è‡ªå®šä¹‰æ˜¾ç¤ºé¢æ¿ä¸Šæ’­æ”¾è§†é¢‘ã€‚å®ƒæ”¯æŒçµæ´»çš„æ˜¾ç¤ºé…ç½®ï¼Œå¹¶èƒ½è‡ªåŠ¨æ ¡æ­£è§†é¢‘çš„å®½é«˜æ¯”ã€‚

![Demo GIF](docs/demo.gif)
*(å»ºè®®åœ¨æ­¤å¤„æ”¾ç½®ä¸€ä¸ªå±•ç¤ºé¡¹ç›®è¿è¡Œæ•ˆæœçš„å›¾ç‰‡æˆ–GIF)*

---

## âœ¨ ä¸»è¦ç‰¹æ€§

- **çµæ´»çš„æ˜¾ç¤ºé…ç½®:**
  - é€šè¿‡ç¼–è¾‘ `config.h` æ–‡ä»¶ï¼Œå¯ä»¥è½»æ¾æ·»åŠ æˆ–ä¿®æ”¹LEDæ¨¡å—çš„ç‰©ç†å¸ƒå±€ï¼ˆå¦‚æ°´å¹³é•¿æ¡å½¢ã€ç½‘æ ¼å½¢ç­‰ï¼‰ã€‚
  - å¯åŠ¨æ—¶å¯é€šè¿‡å‘½ä»¤è¡Œå‚æ•°åˆ‡æ¢ä½¿ç”¨ `24x4` æˆ– `12x8` ç­‰ä¸åŒé…ç½®ã€‚

- **è‡ªåŠ¨å®½é«˜æ¯”æ ¡æ­£:**
  - æ ¹æ®æ‰€é€‰æ˜¾ç¤ºé…ç½®çš„å®½é«˜æ¯”ï¼Œè‡ªåŠ¨è£å‰ªæºè§†é¢‘ï¼Œä»¥ç¡®ä¿æ­£ç¡®çš„æ˜¾ç¤ºæ¯”ä¾‹ã€‚

- **å¤šç§æ’­æ”¾æ¨¡å¼:**
  1.  **HTTPæ’­æ”¾å™¨ (`7seg-http-player`):** ä¸€ä¸ªWebæœåŠ¡å™¨ï¼Œå…è®¸æ‚¨ä»æµè§ˆå™¨ä¸Šä¼ è§†é¢‘å¹¶ç®¡ç†æ’­æ”¾é˜Ÿåˆ—ã€‚
  2.  **æ–‡ä»¶æ’­æ”¾å™¨ (`7seg-file-player`):** ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºç›´æ¥æ’­æ”¾å•ä¸ªè§†é¢‘æ–‡ä»¶ã€‚
  3.  **UDPæµåª’ä½“æ’­æ”¾å™¨ (`7seg-udp-player`):** é€šè¿‡UDPæ¥æ”¶éŸ³è§†é¢‘æ•°æ®ï¼Œå¹¶å®æ—¶æ˜¾ç¤ºåœ¨é¢æ¿ä¸Šã€‚
  4.  **HTTP GStreameræ’­æ”¾å™¨ (`7seg-http-streamer`):** ä½¿ç”¨GStreamerè¿›è¡Œè§†é¢‘å¤„ç†çš„å¤‡ç”¨HTTPæœåŠ¡å™¨ã€‚

- **æ¨¡å—åŒ–è®¾è®¡:**
  - æ ¸å¿ƒçš„ã€åŸºäºOpenCVçš„è§†é¢‘æ’­æ”¾é€»è¾‘é›†ä¸­åœ¨ `playback.cpp` ä¸­ï¼Œç¡®ä¿äº†é«˜å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§ã€‚

## ç¡¬ä»¶è¦æ±‚

- æ”¯æŒI2CåŠŸèƒ½çš„ã€åŸºäºLinuxçš„å•æ¿è®¡ç®—æœºï¼ˆå¦‚Raspberry Pi, Rockchip SBCç­‰ï¼‰ã€‚
- å¤šä¸ªæ­è½½HT16K33 LEDé©±åŠ¨ICçš„7æ®µæ•°ç ç®¡LEDæ¨¡å—ã€‚
- ç”¨äºè¿æ¥æ¨¡å—çš„I2Cæ€»çº¿æ¥çº¿ã€‚

## è½¯ä»¶ä¾èµ–

- æ”¯æŒC++17çš„ç¼–è¯‘å™¨ (g++)
- `make`
- OpenCV 4 (`libopencv-dev`)
- GStreamer 1.0 (`libgstreamer1.0-dev`)
- `libi2c-dev` (ç”¨äºI2Cé€šä¿¡)
- SDL2 (ç”¨äºUDPæµåª’ä½“çš„éŸ³é¢‘æ’­æ”¾, `libsdl2-dev`)
- `cpp-httplib` (å·²åŒ…å«åœ¨é¡¹ç›®å†…)

#### åœ¨ Ubuntu / Debian / Radxa OS ä¸Šçš„å®‰è£…ç¤ºä¾‹
```bash
sudo apt update
sudo apt install -y build-essential make libopencv-dev libi2c-dev libsdl2-dev libgstreamer1.0-dev
```

## ğŸš€ å¦‚ä½•æ„å»º

è¿è¡Œ `make` å‘½ä»¤æ¥æ„å»ºæ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶ï¼š
```bash
make
```
æˆåŠŸåï¼Œé¡¹ç›®æ ¹ç›®å½•å°†ç”Ÿæˆå››ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚

## ğŸ“– ä½¿ç”¨æ–¹æ³•

æ¯ä¸ªå¯æ‰§è¡Œæ–‡ä»¶éƒ½å¯ä»¥é€‰æ‹©æ€§åœ°æŒ‡å®šä¸€ä¸ªæ˜¾ç¤ºé…ç½®å‚æ•°ã€‚å¦‚æœçœç•¥ï¼Œåˆ™é»˜è®¤ä½¿ç”¨ `24x4` é…ç½®ã€‚

### 1. HTTPæ’­æ”¾å™¨ (`7seg-http-player`)

é€šè¿‡Web UIç®¡ç†å’Œæ’­æ”¾è§†é¢‘ã€‚(åç«¯: OpenCV)

**å‘½ä»¤:**
```bash
./7seg-http-player [default_video_dir] [config]
```
- `[default_video_dir]` (å¯é€‰): å­˜æ”¾é»˜è®¤è§†é¢‘çš„ç›®å½•è·¯å¾„ã€‚(é»˜è®¤: `default_videos`)
- `[config]` (å¯é€‰): è¦ä½¿ç”¨çš„æ˜¾ç¤ºé…ç½®ã€‚(ä¾‹å¦‚: `12x8`, é»˜è®¤: `24x4`)

**ç¤ºä¾‹:**
```bash
./7seg-http-player default_videos 12x8
```
å¯åŠ¨åï¼Œä»åŒä¸€ç½‘ç»œä¸­çš„PCè®¿é—® `http://<SBCçš„IPåœ°å€>:8080`ã€‚

### 2. æ–‡ä»¶æ’­æ”¾å™¨ (`7seg-file-player`)

ç›´æ¥æ’­æ”¾å•ä¸ªè§†é¢‘æ–‡ä»¶ã€‚(åç«¯: OpenCV)

**å‘½ä»¤:**
```bash
./7seg-file-player <video_file> [config]
```
**ç¤ºä¾‹:**
```bash
./7seg-file-player test.mp4 12x8
```

### 3. UDPæµåª’ä½“æ’­æ”¾å™¨ (`7seg-udp-player`)

æ¥æ”¶å¹¶æ’­æ”¾åœ¨ç½‘ç»œä¸Šä¼ è¾“çš„æµåª’ä½“æ•°æ®ã€‚

**å‘½ä»¤:**
```bash
./7seg-udp-player [config]
```
**ç¤ºä¾‹:**
```bash
./7seg-udp-player 12x8
```
æœåŠ¡å™¨åœ¨ç«¯å£ `9999` ä¸Šç›‘å¬UDPæ•°æ®åŒ…ã€‚

### 4. HTTP GStreameræ’­æ”¾å™¨ (`7seg-http-streamer`)

ä¸€ä¸ªä½¿ç”¨GStreamerä½œä¸ºåç«¯çš„HTTPæœåŠ¡å™¨ï¼Œå¯èƒ½æä¾›ä¸åŒçš„æ€§èƒ½ç‰¹æ€§æˆ–æ ¼å¼æ”¯æŒã€‚

**å‘½ä»¤:**
```bash
./7seg-http-streamer
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config.h
â”‚   â”œâ”€â”€ playback.h/.cpp     # é€šç”¨OpenCVæ’­æ”¾å¼•æ“
â”‚   â”œâ”€â”€ http_player.cpp   # 7seg-http-player çš„ main å‡½æ•°
â”‚   â”œâ”€â”€ file_player.cpp   # 7seg-file-player çš„ main å‡½æ•°
â”‚   â”œâ”€â”€ udp_player.cpp    # 7seg-udp-player çš„ main å‡½æ•°
â”‚   â”œâ”€â”€ http_streamer.cpp # 7seg-http-streamer çš„ main å‡½æ•°
â”‚   â””â”€â”€ ...
â”œâ”€â”€ Makefile              # æ„å»ºè„šæœ¬
â””â”€â”€ README.md
```